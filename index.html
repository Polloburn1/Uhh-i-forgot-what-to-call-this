<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amogus - Social Deduction</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:;base64,iVBORw0KGgo="> <!-- No favicon request -->
</head>
<script>
    // Global Error Handler to catch 404s and Runtime Errors
    window.addEventListener('error', function (e) {
        // e.target check for resource errors (script/img 404s)
        const src = e.target && (e.target.src || e.target.href);
        const msg = e.message || "Unknown Error";

        if (src) {
            console.error("Resource Failed to Load:", src);
            showError(`Failed to load resource: ${src}`);
        } else {
            console.error("Runtime Error:", msg);
            showError(`Error: ${msg}`);
        }

        function showError(text) {
            const box = document.getElementById('debug-overlay') || document.createElement('div');
            box.id = 'debug-overlay';
            box.style.position = 'fixed';
            box.style.top = '0';
            box.style.left = '0';
            box.style.width = '100%';
            box.style.background = 'rgba(220, 38, 38, 0.9)'; // Red
            box.style.color = 'white';
            box.style.padding = '10px';
            box.style.zIndex = '10000';
            box.style.fontFamily = 'monospace';
            box.innerText = text;
            document.body.appendChild(box);
        }
    }, true); // Use capture to catch resource errors
</script>

<body>
    <div class="view-container">

        <!-- Main Menu Section -->
        <div id="view-menu" class="card view-section">
            <h1>AMOGUS</h1>
            <p style="color: var(--text-muted); margin-bottom: 2rem;">A browser-based social deduction experiment.</p>

            <div class="flex-col">
                <button id="btn-to-lobby">Create / Join Game</button>
                <button class="secondary" id="btn-to-editor">Map Editor</button>
            </div>

            <div style="margin-top: 2rem; display: flex; gap: 10px; justify-content: center;">
                <button class="secondary" onclick="window.toggleTheme()" style="padding: 0.5rem;">üåó Theme</button>
                <button class="secondary" onclick="window.toggleBgMode()" style="padding: 0.5rem;">üñºÔ∏è BG Mode</button>
            </div>
        </div>

        <!-- Lobby Section (Hidden by default) -->
        <div id="view-lobby" class="card view-section hidden">
            <h2>Game Setup</h2>
            <div class="input-group">
                <label>Nickname</label>
                <input type="text" id="nickname" placeholder="Enter your name">
            </div>
            <div class="flex-col">
                <button id="btn-host">Host New Game</button>
                <button class="secondary" id="btn-join">Join via Code</button>
                <button class="secondary" id="btn-back">Back</button>
            </div>
        </div>

    </div>
    <script type="module" src="js/theme.js"></script>
    <script type="module" src="js/ui_start.js"></script>
</body>

</html>